public class CommitApexGit {
    public List<ApexClass> clsList{get;set;}
    public List<WrClass> wRList {get;set;}
    public Blob fileBody {get;set;}
    public string  fileName {get;set;}
    public string txtMessage {get;set;}
    
    public CommitApexGit()
    {
        wRList=new List<WrClass>();
        for(ApexClass aClassDetail:[SELECT Id, Name, Body, CreatedById, CreatedDate FROM ApexClass  ORDER BY CreatedDate  DESC Limit 5])
        {
            wRList.add(new WrClass(aClassDetail));  
        }
    }
    
    public PageReference CommitSelectedClass() {
        clsList = new List<ApexClass>();
        For(WrClass w : wRList){
            IF(w.x == true){
                clsList.add(w.acl);
                System.debug('aclBody>>>>'+clsList);
                fileName=clsList[0].Name;
                fileBody= Blob.valueOf(clsList[0].Body);
            }
        }
        HttpRequest req = new HttpRequest();
        Http http = new Http();
        String endpoint = 'https://api.github.com/repos/dipalisharma1996/Repository-5/contents/'+ fileName;
        req.setEndpoint(endpoint);
        req.setMethod('PUT');
        String Gitbytoken= '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';
        String authorizationHeader = 'Bearer ' + Gitbytoken;
        req.setHeader('Authorization',authorizationHeader);
        req.setHeader('Content-Type','application/json');
         String bodyConvertEn= EncodingUtil.base64Encode(fileBody);
         String bodyConvert = '{'+
            +'"message": "'+txtMessage+'",'+
            +'"content": "'+bodyConvertEn+'"'+
            '}';
         req.setBody(bodyConvert);
        system.debug('req body= '+req);
        HTTPResponse res = http.send(req);
        //system.debug('body= '+bodyConvert);
        //System.debug('res>>>'+res);
         txtMessage='';
      
       
        
       
        return null;
    }
    public class WrClass
    {
        public boolean x {get;set;}
        public ApexClass acl{get;set;}
        public string Id {get;set;}
        
        
        public WrClass(ApexClass acl1)
        {
            x=false; 
            acl=acl1;
            
        }
        
    }
}