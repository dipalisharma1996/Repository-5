public class importDataFromCSVController {
    public static Blob csvFileBody{get;set;}
    public static string csvAsString{get;set;}
    public String[] csvFileLines{get;set;}
    public static string txtMessage {get;set;}
    public importDataFromCSVController()
    {
        csvFileLines = new String[]{};
            
            }
    
    public void importCSVFile(){
        try{
            csvAsString = csvFileBody.toString();
            csvFileLines = csvAsString.split('\n');
            
        }
        catch (Exception e)
        {
            ApexPages.Message errorMessage = new ApexPages.Message(ApexPages.severity.ERROR,'An error has occured while importin data Please make sure input csv file is correct');
            ApexPages.addMessage(errorMessage);
        }
    }
     public static PageReference GitCommit(){
        String fileName= csvAsString;
        String trimfileName=fileName.replaceAll( '\\s+', '_');
        System.debug('csvAsString>>>>'+trimfileName);
        HttpRequest req = new HttpRequest();
        // req.setBodyAsBlob(csvFileBody);
        Http http = new Http();
        String endpoint = 'https://api.github.com/repos/dipalisharma1996/Repository-5/contents/'+ trimfileName;
        System.debug('endpoint>>>'+endpoint);
        req.setEndpoint(endpoint);
        req.setMethod('PUT');
        String Gitbytoken= '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';
        String authorizationHeader = 'Bearer ' + Gitbytoken;
        req.setHeader('Authorization',authorizationHeader);
        req.setHeader('Content-Type','application/json');
        String bodyConvertEn= EncodingUtil.base64Encode(csvFileBody);
        
        //req.setBodyAsBlob(csvFileBody);
        String bodyConvert = '{'+
            +'"message": "'+txtMessage+'",'+
            +'"content": "'+bodyConvertEn+'"'+
            '}';
        req.setBody(bodyConvert);
        system.debug('req body= '+req);
        HTTPResponse res = http.send(req);
        system.debug('body= '+bodyConvert);
        System.debug('res>>>'+res);
         txtMessage='';
        return null;
    }
    
    
    
}